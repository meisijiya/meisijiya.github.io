<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="è€æ±Ÿæ¹–">


    <meta name="subtitle" content="è®°å½•è¿›å…¥æˆ¿é—´é—¨åçš„ç¾å¥½">


    <meta name="description" content="ä¸€å¹´å‰ï¼Œå­¤è‹¦ä¼¶ä»ƒçš„è€æ±Ÿæ¹–ï¼Œå¶ç„¶é—´å‘ç°ä¸€å¤„æˆ¿é—´é—¨ï¼Œæ¨é—¨è€Œå…¥ï¼Œä»æ­¤è¿›å…¥äº†å……æ»¡å¹¸ç¦çš„ä¸–ç•Œã€‚">


    <meta name="keywords" content="è€æ±Ÿæ¹–,åšå®¢,æˆ¿é—´é—¨">


<title>æ¬¢è¿æ¥åˆ°è€æ±Ÿæ¹–çš„åšå®¢</title>



    <link rel="icon" href="/images/%E9%87%91%E6%AF%9B.png?_t=1758006391547">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    
    <link rel="stylesheet" href="/css/search.css">
    

<!-- highlight.js æ ·å¼ï¼ˆé»˜è®¤äº®è‰²ï¼‰ -->
<link id="hljs-theme" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github.css">
<!-- highlight.js è‡ªåŠ¨ä¸Šè‰²åŠŸèƒ½ -->
<script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/lib/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<link rel="stylesheet" href="/css/custom.css">



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
  <nav class="navbar">
    <div class="container">
      <div class="navbar-header header-logo">
        <a href="/">è€æ±Ÿæ¹–çš„åšå®¢</a>
      </div>
      <div class="menu navbar-right">
        <!-- åœ¨ç”µè„‘ç«¯çš„å¯¼èˆªé“¾æ¥åŒºåŸŸæ·»åŠ æœç´¢åŠŸèƒ½ -->
        <div class="search-container">
          <a href="javascript:;" onclick="toggleSearchInput()">ğŸ”</a>
          <input
            type="text"
            id="nav-search-input-desktop"
            class="nav-search-input"
            placeholder="æƒ³çŸ¥é“æˆ‘ä»€ä¹ˆç§˜å¯†å‘¢ï¼Œæœæœçœ‹å§"
            oninput="navSearch(this)"
          />
          <div id="nav-search-result-desktop" class="nav-search-result"></div>
        </div>

        
        <a class="menu-item" href="/archives">å½’æ¡£</a>
        
        <a class="menu-item" href="/category">åˆ†ç±»</a>
        
        <a class="menu-item" href="/tag">æ ‡ç­¾</a>
        
        <a class="menu-item" href="/Timer">ä»»åŠ¡è®¡æ—¶å™¨</a>
        
        <a class="menu-item" href="/timeLine">æ—¶é—´çº¿</a>
        
        <a class="menu-item" href="/tongji">ç½‘ç«™ç»Ÿè®¡</a>
        
        <a class="menu-item" href="/about">å…³äº</a>
        

        <input id="switch_default" type="checkbox" class="switch_default" />
        <label for="switch_default" class="toggleBtn"></label>
      </div>
    </div>
  </nav>

  
  <nav class="navbar-mobile" id="nav-mobile">
    <div class="container">
      <div class="navbar-header">
        <div>
          <a href="/">è€æ±Ÿæ¹–çš„åšå®¢</a
          ><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
        </div>

        <div class="menu-toggle" onclick="mobileBtn()">
          <svg
            class="menu-icon"
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 24 24"
          >
            <path
              fill="currentColor"
              d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"
            />
          </svg>
          <svg
            class="close-icon"
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 24 24"
          >
            <!-- Icon from Material Symbols Light by Google - https://github.com/google/material-design-icons/blob/master/LICENSE -->
            <path
              fill="currentColor"
              d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"
            />
          </svg>
        </div>
      </div>

      <div class="menu" id="mobile-menu">
        
        <a class="menu-item" href="/archives">å½’æ¡£</a>
        
        <a class="menu-item" href="/category">åˆ†ç±»</a>
        
        <a class="menu-item" href="/tag">æ ‡ç­¾</a>
        
        <a class="menu-item" href="/Timer">ä»»åŠ¡è®¡æ—¶å™¨</a>
        
        <a class="menu-item" href="/timeLine">æ—¶é—´çº¿</a>
        
        <a class="menu-item" href="/tongji">ç½‘ç«™ç»Ÿè®¡</a>
        
        <a class="menu-item" href="/about">å…³äº</a>
        
        <!-- æ‰‹æœºæ¨¡å¼æœç´¢æ¡† -->
        <div class="search-container mobile-container">
          <a class="menu-item" href="javascript:;" onclick="toggleSearchInput()"
            >ğŸ”</a
          >
          <input
            type="text"
            id="nav-search-input-mobile"
            class="nav-search-input"
            placeholder="æƒ³çŸ¥é“æˆ‘ä»€ä¹ˆç§˜å¯†å‘¢ï¼Œæœæœçœ‹å§"
            oninput="navSearch(this)"
          />
          <div id="nav-search-result-mobile" class="nav-search-result"></div>
        </div>
      </div>
    </div>
  </nav>
</header>
<script>
  var mobileBtn = function f() {
    var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
    var mobileMenu = document.getElementById("mobile-menu");
    if (toggleMenu.classList.contains("active")) {
      toggleMenu.classList.remove("active");
      mobileMenu.classList.remove("active");
    } else {
      toggleMenu.classList.add("active");
      mobileMenu.classList.add("active");
    }
  };

  function toggleSearchInput() {
    const inputs = document.querySelectorAll(".nav-search-input");
    const results = document.querySelectorAll(".nav-search-result");
    inputs.forEach((input) => {
      input.classList.toggle("active");
      if (input.classList.contains("active")) input.focus();
    });
    results.forEach((r) => (r.style.display = "none"));
  }

  // ç‚¹å‡»å¤–éƒ¨åŒºåŸŸéšè—æœç´¢æ¡†å’Œç»“æœå®¹å™¨çš„å‡½æ•°
  function handleClickOutsideSearch(event) {
    const searchContainers = document.querySelectorAll(".search-container");
    searchContainers.forEach((container) => {
      const searchInput = container.querySelector(".nav-search-input");
      const searchIcon = container.querySelector("a");

      // å¦‚æœç‚¹å‡»çš„å…ƒç´ ä¸æ˜¯æœç´¢è¾“å…¥æ¡†æˆ–æœç´¢å›¾æ ‡ï¼Œåˆ™éšè—æœç´¢æ¡†å’Œç»“æœå®¹å™¨
      if (
        !searchInput.contains(event.target) &&
        !searchIcon.contains(event.target)
      ) {
        searchInput.classList.remove("active");
        searchInput.value = ""
        // æ ¹æ®è¾“å…¥æ¡†IDç¡®å®šå¯¹åº”çš„ç»“æœå®¹å™¨
        let resultContainer;
        if (searchInput.id === "nav-search-input-mobile") {
          // ç§»åŠ¨ç«¯ç»“æœå®¹å™¨
          resultContainer = document.querySelector(
            ".navbar-mobile .nav-search-result"
          );
        } else {
          // æ¡Œé¢ç«¯ç»“æœå®¹å™¨
          resultContainer = document.getElementById(
            "nav-search-result-desktop"
          );
        }

        if (resultContainer) {
          resultContainer.style.display = "none";
          resultContainer.innerHTML = ""; // æ¸…ç©ºç»“æœå®¹å™¨å†…å®¹
        }
      }
    });
  }

  // æ·»åŠ å…¨å±€ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
  document.addEventListener("click", function (event) {
    handleClickOutsideSearch(event);
  });

  // æ–°å¢ï¼šæœç´¢åŠŸèƒ½å®ç°
  let searchData = []; // å…¨å±€å˜é‡å­˜å‚¨æœç´¢æ•°æ®

  // é¡µé¢åŠ è½½å®Œæˆåè·å–æœç´¢æ•°æ®
  document.addEventListener("DOMContentLoaded", function () {
    fetch("/search.xml")
      .then((res) => res.text())
      .then((xmlText) => {
        const parser = new DOMParser();
        const xml = parser.parseFromString(xmlText, "text/xml");
        const entries = xml.getElementsByTagName("entry");
        for (let entry of entries) {
          searchData.push({
            title: entry.getElementsByTagName("title")[0]?.textContent || "",
            content:
              entry.getElementsByTagName("content")[0]?.textContent || "",
            url: entry.getElementsByTagName("url")[0]?.textContent || "",
          });
        }
      })
      .catch((err) => {
        console.error("Failed to load search data:", err);
      });
  });

  // æ–°å¢ï¼šå¯¼èˆªæœç´¢æ–¹æ³•
  function navSearch(inputElement) {
    const keyword = inputElement.value.trim().toLowerCase();
    // æŸ¥æ‰¾å¯¹åº”çš„æœç´¢ç»“æœå®¹å™¨
    let resultContainer;

    if (inputElement.id === "nav-search-input-desktop") {
      // æ¡Œé¢ç«¯
      resultContainer = document.getElementById("nav-search-result-desktop");
    } else if (inputElement.id === "nav-search-input-mobile") {
      // ç§»åŠ¨ç«¯
      resultContainer =
        inputElement.parentNode.querySelector(".nav-search-result");
    }

    if (!resultContainer) return;

    resultContainer.innerHTML = "";

    if (!keyword) {
      resultContainer.style.display = "none";
      return;
    }

    // æ˜¾ç¤ºç»“æœå®¹å™¨
    resultContainer.style.display = "block";

    // è¿‡æ»¤æœç´¢æ•°æ®
    const results = searchData.filter(
      (data) =>
        (data.title && data.title.toLowerCase().includes(keyword)) ||
        (data.content && data.content.toLowerCase().includes(keyword))
    );

    if (results.length === 0) {
      resultContainer.innerHTML =
        '<p class="no-result">æ²¡æœ‰ç»“æœå“Ÿï¼Œæ¢ä¸ªå…³é”®è¯è¯•è¯•å§</p>';
      return;
    }

    // é™åˆ¶æ˜¾ç¤ºç»“æœæ•°é‡
    const maxResults = 10;
    const limitedResults = results.slice(0, maxResults);

    // æ„å»ºç»“æœHTML
    const html = limitedResults
      .map((item) => {
        // æå–åŒ…å«å…³é”®å­—çš„å†…å®¹ç‰‡æ®µ
        let contentSnippet = "";
        if (item.content) {
          // æ‰¾åˆ°åŒ…å«å…³é”®å­—çš„å†…å®¹ç‰‡æ®µ
          const contentLower = item.content.toLowerCase();
          const keywordIndex = contentLower.indexOf(keyword);

          // æå–å…³é”®å­—å‰åçš„å†…å®¹
          const start = Math.max(0, keywordIndex - 3 * keyword.length);
          const end = Math.min(
            item.content.length,
            keywordIndex + 3 * keyword.length
          );
          contentSnippet = item.content.substring(start, end);
        // é«˜äº®å…³é”®å­—
      const keywordRegex = new RegExp(`(${keyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
      contentSnippet = contentSnippet.replace(
        keywordRegex,
        "<mark>$1</mark>"
      );
        }

        return `<div class="search-result-item">
  <a href="${item.url}">
    <div>æ ‡é¢˜ï¼š${item.title}</div>
    <div>å†…å®¹ï¼š${contentSnippet}</div>
  </a>
</div>`;
      })
      .join("");
    resultContainer.innerHTML = html;
  }
</script>
<style>
  /* æ‰‹æœºç«¯ä½¿ç”¨flexboxå¸ƒå±€æœç´¢å®¹å™¨ */
  .mobile-container {
    display: flex;
    align-items: center;
    flex-direction: row;
    margin-bottom: 10px;
    margin-left: 10px;
    flex-grow: 1;
    max-width: calc(100% - 40px);
  }


  .search-result-item {
  border: 1px solid #ddd; /* è¾¹æ¡† */
  margin: 4px 0; /* å¤–å±‚é—´è· */
  padding: 0; /* æ— å†…è¾¹è· */
  background: #fff; /* èƒŒæ™¯è‰² */
}

.search-result-item a {
  display: block;
  text-decoration: none;
  color: inherit;
}

.search-result-item div {
  padding: 3px 8px; /* ç´§å‡‘çš„å†…è¾¹è· */
  margin: 0; /* æ— å¤–è¾¹è· */
  line-height: 1.3; /* ç´§å‡‘çš„è¡Œé«˜ */
  word-wrap: break-word; /* å…è®¸é•¿å•è¯æ¢è¡Œ */
  white-space: normal; /* å…è®¸æ­£å¸¸æ¢è¡Œ */
}

.search-result-item div:first-child {
  border-bottom: 1px solid #eee; /* æ ‡é¢˜å’Œå†…å®¹ä¹‹é—´çš„åˆ†éš”çº¿ */
}


</style>

            <div class="main">
                <div class="container">
    <article class="post-wrap page">
        
        <h2 class="post-title"></h2>
        
        <section class="post-content">
            <!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»åŠ¡è®¡æ—¶å™¨ | é«˜æ•ˆç®¡ç†ä½ çš„æ—¶é—´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Tailwind é…ç½® -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        danger: '#EF4444',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .timer-shadow {
                box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.1), 0 8px 10px -6px rgba(59, 130, 246, 0.1);
            }
            .card-hover {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            .progress-bar {
                height: 8px;
                border-radius: 4px;
                background-color: #E5E7EB;
                overflow: hidden;
            }
            .progress-value {
                height: 100%;
                transition: width 0.3s ease;
            }
        }
        
        /* æ·»åŠ ä¸åšå®¢ä¸»é¢˜ä¸€è‡´çš„æ ·å¼ */
        body {
            background-color: #fbfbfb;
            color: #161209;
            font-family: 'Microsoft Jhenghei', Lantinghei SC, 'lanting', PingFang SC, Seguo UI, Microsoft Yahei, Arial;
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        
        body.dark-theme {
            background-color: #292a2d;
            color: #a9a9b3;
        }
        
        /* ä½¿å†…å®¹å±…ä¸­å¹¶é™åˆ¶æœ€å¤§å®½åº¦ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding-left: 1em;
            padding-right: 1em;
        }
        
        /* å¤´éƒ¨æ ·å¼ */
        header {
            background-color: #fbfbfb;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
        }
        
        .dark-theme header {
            background-color: #292a2d;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            transition: all 0.2s ease;
        }
        
        .dark-theme .btn {
            background-color: #3a3a3a;
            color: #e0e0e0;
        }
        
        .dark-theme .btn:hover {
            background-color: #4a4a4a;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease, box-shadow 0.2s ease;
        }
        
        .dark-theme .card {
            background-color: #333336;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        /* è¡¨æ ¼æ ·å¼ */
        .dark-theme table thead {
            background-color: #444448;
        }
        
        .dark-theme table td,
        .dark-theme table th {
            border-color: #555559;
        }
        
        /* è¿›åº¦æ¡æ ·å¼ */
        .dark-theme .progress-bar {
            background-color: #555559;
        }
        
        /* è¾“å…¥æ¡†æ ·å¼ */
        .form-input {
            background-color: #ffffff;
            border-color: #d1d5db;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        
        .dark-theme .form-input {
            background-color: #2d2d30;
            border-color: #555559;
            color: #e0e0e0;
        }
        
        .dark-theme .form-input:focus {
            border-color: #3B82F6;
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .dark-theme #task-modal {
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        /* é¡µè„šæ ·å¼ */
        footer {
            background-color: #292a2d;
            color: #a9a9b3;
        }
        
        /* é“¾æ¥æ ·å¼ */
        a {
            color: #161209;
            transition: color 0.2s ease;
        }
        
        .dark-theme a {
            color: #a9a9b3;
        }
        
        .dark-theme a:hover {
            color: #ffffff;
        }
    </style>
</head>
<body class="bg-gray-50 text-dark min-h-screen flex flex-col">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
           <div class="flex items-center space-x-2">
                <i class="fa fa-clock-o text-primary text-2xl"></i>
                <h1 class="text-gray-600 ">ä»»åŠ¡è®¡æ—¶å™¨</h1>
            </div>
            
            <nav class="hidden md:flex items-center space-x-6">
                <a href="#timer" class="text-gray-600 hover:text-primary transition-colors">è®¡æ—¶å™¨</a>
                <a href="#tasks" class="text-gray-600 hover:text-primary transition-colors">ä»»åŠ¡ç®¡ç†</a>
                <a href="#history" class="text-gray-600 hover:text-primary transition-colors">å†å²è®°å½•</a>
            </nav>
            
            <button id="mobile-menu-button" class="md:hidden text-gray-600 hover:text-primary">
                <i class="fa fa-bars text-xl"></i>
            </button>
        </div>
        
        <!-- ç§»åŠ¨ç«¯èœå• -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 px-4 py-2">
            <a href="#timer" class="block py-2 text-gray-600 hover:text-primary">è®¡æ—¶å™¨</a>
            <a href="#tasks" class="block py-2 text-gray-600 hover:text-primary">ä»»åŠ¡ç®¡ç†</a>
            <a href="#history" class="block py-2 text-gray-600 hover:text-primary">å†å²è®°å½•</a>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- æ•°æ®å­˜å‚¨çŠ¶æ€æŒ‡ç¤ºå™¨ -->
        <div id="storage-status" class="mb-6 text-right text-sm">
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                <i class="fa fa-check-circle mr-1"></i> æ•°æ®å·²ä¿å­˜
            </span>
        </div>
        
        <!-- è®¡æ—¶å™¨éƒ¨åˆ† -->
        <section id="timer" class="mb-16">
            <div class="max-w-2xl mx-auto">
                <div class="text-center mb-8">
                    <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-2">ä¸“æ³¨è®¡æ—¶å™¨</h2>
                    <p class="text-gray-500">ä¸ºä½ çš„ä»»åŠ¡è®¾å®šæ—¶é—´ï¼Œæé«˜å·¥ä½œæ•ˆç‡</p>
                </div>
                
                <div class="bg-white rounded-2xl p-8 timer-shadow card">
                    <!-- å½“å‰ä»»åŠ¡æ˜¾ç¤º -->
                    <div class="mb-6 text-center">
                        <h3 id="current-task-name" class="text-xl font-semibold text-gray-700">æœªé€‰æ‹©ä»»åŠ¡</h3>
                        <p id="current-task-description" class="text-gray-500 text-sm mt-1">è¯·ä»ä»»åŠ¡åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªä»»åŠ¡å¼€å§‹è®¡æ—¶</p>
                        
                        <!-- ä»»åŠ¡è¿›åº¦æ¡ -->
                        <div id="current-task-progress-container" class="mt-4 hidden">
                            <div class="flex justify-between text-sm mb-1">
                                <span id="current-task-progress-text">è¿›åº¦: 0%</span>
                                <span id="current-task-time-info">å·²ç”¨æ—¶ / ç›®æ ‡æ—¶é•¿</span>
                            </div>
                            <div class="progress-bar">
                                <div id="current-task-progress-bar" class="progress-value bg-primary" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ—¶é—´æ˜¾ç¤º -->
                    <div class="text-center mb-8">
                        <div id="timer-display" class="text-[clamp(2.5rem,8vw,5rem)] font-bold text-primary tracking-tight">
                            00:00:00
                        </div>
                        <div class="flex justify-center mt-2 space-x-2">
                            <span id="timer-status" class="inline-block px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm">
                                å‡†å¤‡å°±ç»ª
                            </span>
                        </div>
                    </div>
                    
                    <!-- è®¡æ—¶å™¨æ§åˆ¶æŒ‰é’® -->
                    <div class="flex flex-wrap justify-center gap-4">
                        <button id="start-timer" class="px-6 py-3 bg-secondary text-white rounded-lg shadow hover:bg-secondary/90 transition-all flex items-center btn">
                            <i class="fa fa-play mr-2"></i> å¼€å§‹
                        </button>
                        <button id="pause-timer" class="px-6 py-3 bg-accent text-white rounded-lg shadow hover:bg-accent/90 transition-all flex items-center hidden btn">
                            <i class="fa fa-pause mr-2"></i> æš‚åœ
                        </button>
                        <button id="reset-timer" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg shadow hover:bg-gray-300 transition-all flex items-center btn">
                            <i class="fa fa-refresh mr-2"></i> é‡ç½®
                        </button>
                        <button id="complete-task" class="px-6 py-3 bg-primary text-white rounded-lg shadow hover:bg-primary/90 transition-all flex items-center hidden btn">
                            <i class="fa fa-check mr-2"></i> å®Œæˆ
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ä»»åŠ¡ç®¡ç†éƒ¨åˆ† -->
        <section id="tasks" class="mb-16">
            <div class="max-w-4xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">ä»»åŠ¡ç®¡ç†</h2>
                    <button id="add-task-button" class="px-4 py-2 bg-primary text-white rounded-lg shadow hover:bg-primary/90 transition-all flex items-center btn">
                        <i class="fa fa-plus mr-2"></i> æ·»åŠ ä»»åŠ¡
                    </button>
                </div>
                
                <!-- ä»»åŠ¡åˆ—è¡¨ -->
                <div id="task-list" class="grid gap-4">
                    <!-- ä»»åŠ¡å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <!-- ç©ºçŠ¶æ€æç¤º -->
                <div id="empty-tasks" class="hidden py-16 text-center card">
                    <i class="fa fa-tasks text-gray-300 text-5xl mb-4"></i>
                    <p class="text-gray-500">è¿˜æ²¡æœ‰ä»»åŠ¡ï¼Œç‚¹å‡»"æ·»åŠ ä»»åŠ¡"æŒ‰é’®åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªä»»åŠ¡å§</p>
                </div>
            </div>
        </section>
        
        <!-- å†å²è®°å½•éƒ¨åˆ† -->
        <section id="history">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-2xl font-bold mb-6">å†å²è®°å½•</h2>
                
                <!-- å†å²è®°å½•åˆ—è¡¨ -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden card">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ä»»åŠ¡åç§°</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ—¶é•¿</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å¼€å§‹æ—¶é—´</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">çŠ¶æ€</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="history-list">
                                <!-- å†å²è®°å½•å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ç©ºå†å²è®°å½•æç¤º -->
                <div id="empty-history" class="hidden py-16 text-center card">
                    <i class="fa fa-history text-gray-300 text-5xl mb-4"></i>
                    <p class="text-gray-500">æš‚æ— è®¡æ—¶å†å²è®°å½•</p>
                </div>
            </div>
        </section>
    </main>
    
    <!-- æ·»åŠ /ç¼–è¾‘ä»»åŠ¡æ¨¡æ€æ¡† -->
    <div id="task-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4 transform transition-all scale-95 opacity-0" id="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-xl font-bold">æ·»åŠ æ–°ä»»åŠ¡</h3>
                <button id="close-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="task-form">
                <input type="hidden" id="task-id">
                
                <div class="mb-4">
                    <label for="task-name" class="block text-sm font-medium text-gray-700 mb-1">ä»»åŠ¡åç§°</label>
                    <input type="text" id="task-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors form-input" placeholder="è¾“å…¥ä»»åŠ¡åç§°" required>
                </div>
                
                <div class="mb-4">
                    <label for="task-description" class="block text-sm font-medium text-gray-700 mb-1">ä»»åŠ¡æè¿° (å¯é€‰)</label>
                    <textarea id="task-description" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors form-input" placeholder="è¾“å…¥ä»»åŠ¡æè¿°"></textarea>
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">ç›®æ ‡æ—¶é•¿</label>
                    <div class="flex space-x-2">
                        <div class="flex-1">
                            <input type="number" id="task-hours" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors form-input" placeholder="æ—¶" min="0">
                        </div>
                        <div class="flex-1">
                            <input type="number" id="task-minutes" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors form-input" placeholder="åˆ†" min="0" max="59">
                        </div>
                        <div class="flex-1">
                            <input type="number" id="task-seconds" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors form-input" placeholder="ç§’" min="0" max="59">
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">è®¾ç½®å®Œæˆè¯¥ä»»åŠ¡çš„è®¡åˆ’ç”¨æ—¶</p>
                </div>
                
                <div class="flex justify-end space-x-3">
                    <button type="button" id="cancel-task" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors btn">å–æ¶ˆ</button>
                    <button type="submit" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors btn">ä¿å­˜ä»»åŠ¡</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- <footer class="bg-dark text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <div class="flex items-center space-x-2">
                        <i class="fa fa-clock-o text-primary"></i>
                        <span class="font-bold">ä»»åŠ¡è®¡æ—¶å™¨</span>
                    </div>
                    <p class="text-gray-400 text-sm mt-1">é«˜æ•ˆç®¡ç†ä½ çš„æ—¶é—´ï¼Œæå‡å·¥ä½œæ•ˆç‡</p>
                </div>
                
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fa fa-github text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fa fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fa fa-envelope text-xl"></i>
                    </a>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-6 pt-6 text-center text-gray-400 text-sm">
                &copy; 2023 ä»»åŠ¡è®¡æ—¶å™¨ | ç”¨æ—¶é—´åˆ›é€ ä»·å€¼
            </div>
        </div>
    </footer> -->
    
    <script>
        // å…¨å±€çŠ¶æ€ç®¡ç†
        const state = {
            tasks: [],
            history: [],
            currentTask: null,
            timer: null,
            seconds: 0,
            isRunning: false,
            // æœ¬åœ°å­˜å‚¨é”®å
            storageKey: 'taskTimerData'
        };
        
        // DOM å…ƒç´ 
        const elements = {
            timerDisplay: document.getElementById('timer-display'),
            timerStatus: document.getElementById('timer-status'),
            startTimerBtn: document.getElementById('start-timer'),
            pauseTimerBtn: document.getElementById('pause-timer'),
            resetTimerBtn: document.getElementById('reset-timer'),
            completeTaskBtn: document.getElementById('complete-task'),
            currentTaskName: document.getElementById('current-task-name'),
            currentTaskDescription: document.getElementById('current-task-description'),
            currentTaskProgressContainer: document.getElementById('current-task-progress-container'),
            currentTaskProgressBar: document.getElementById('current-task-progress-bar'),
            currentTaskProgressText: document.getElementById('current-task-progress-text'),
            currentTaskTimeInfo: document.getElementById('current-task-time-info'),
            taskList: document.getElementById('task-list'),
            emptyTasks: document.getElementById('empty-tasks'),
            historyList: document.getElementById('history-list'),
            emptyHistory: document.getElementById('empty-history'),
            addTaskButton: document.getElementById('add-task-button'),
            taskModal: document.getElementById('task-modal'),
            modalContent: document.getElementById('modal-content'),
            modalTitle: document.getElementById('modal-title'),
            closeModal: document.getElementById('close-modal'),
            cancelTask: document.getElementById('cancel-task'),
            taskForm: document.getElementById('task-form'),
            taskId: document.getElementById('task-id'),
            taskName: document.getElementById('task-name'),
            taskDescription: document.getElementById('task-description'),
            taskHours: document.getElementById('task-hours'),
            taskMinutes: document.getElementById('task-minutes'),
            taskSeconds: document.getElementById('task-seconds'),
            mobileMenuButton: document.getElementById('mobile-menu-button'),
            mobileMenu: document.getElementById('mobile-menu'),
            storageStatus: document.getElementById('storage-status')
        };
        
        // æœ¬åœ°å­˜å‚¨ç›¸å…³å‡½æ•°
        const saveToLocalStorage = () => {
            try {
                // å‡†å¤‡è¦ä¿å­˜çš„æ•°æ®
                const dataToSave = {
                    tasks: state.tasks,
                    history: state.history
                };
                
                localStorage.setItem(state.storageKey, JSON.stringify(dataToSave));
                
                // æ›´æ–°å­˜å‚¨çŠ¶æ€æŒ‡ç¤ºå™¨
                updateStorageStatus(true);
            } catch (error) {
                console.error('ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨å¤±è´¥:', error);
                updateStorageStatus(false);
            }
        };
        
        const loadFromLocalStorage = () => {
            try {
                const savedData = localStorage.getItem(state.storageKey);
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    
                    // æ¢å¤ä»»åŠ¡æ•°æ®
                    if (Array.isArray(parsedData.tasks)) {
                        state.tasks = parsedData.tasks;
                    }
                    
                    // æ¢å¤å†å²è®°å½•
                    if (Array.isArray(parsedData.history)) {
                        state.history = parsedData.history;
                    }
                    
                    return true;
                }
            } catch (error) {
                console.error('ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®å¤±è´¥:', error);
            }
            
            return false;
        };
        
        const updateStorageStatus = (isSaved) => {
            if (isSaved) {
                elements.storageStatus.innerHTML = `
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        <i class="fa fa-check-circle mr-1"></i> æ•°æ®å·²ä¿å­˜
                    </span>
                `;
            } else {
                elements.storageStatus.innerHTML = `
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                        <i class="fa fa-exclamation-circle mr-1"></i> æ•°æ®ä¿å­˜å¤±è´¥
                    </span>
                `;
            }
        };
        
        // å·¥å…·å‡½æ•°
        const formatTime = (seconds) => {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = seconds % 60;
            return [
                h.toString().padStart(2, '0'),
                m.toString().padStart(2, '0'),
                s.toString().padStart(2, '0')
            ].join(':');
        };
        
        const formatDuration = (seconds) => {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = seconds % 60;
            return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        };
        
        // è®¡ç®—è¿›åº¦ç™¾åˆ†æ¯”
        const calculateProgress = (current, target) => {
            if (target <= 0) return 0;
            return Math.min(100, Math.round((current / target) * 100));
        };
        
        // è·å–å½“å‰æ—¶é—´çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²
        const getCurrentTimeString = () => {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            
            // ç¡®å®šæ˜¯ä»Šå¤©è¿˜æ˜¯æ˜¨å¤©
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            if (now >= today) {
                return `ä»Šå¤© ${hours}:${minutes}`;
            } else if (now >= yesterday) {
                return `æ˜¨å¤© ${hours}:${minutes}`;
            } else {
                const month = (now.getMonth() + 1).toString().padStart(2, '0');
                const day = now.getDate().toString().padStart(2, '0');
                return `${month}/${day} ${hours}:${minutes}`;
            }
        };
        
        // æ¸²æŸ“å‡½æ•°
        const renderTimer = () => {
            elements.timerDisplay.textContent = formatTime(state.seconds);
            
            // æ›´æ–°å½“å‰ä»»åŠ¡è¿›åº¦
            if (state.currentTask && state.currentTask.targetDuration > 0) {
                const totalTime = state.currentTask.duration + state.seconds;
                const progress = calculateProgress(totalTime, state.currentTask.targetDuration);
                
                elements.currentTaskProgressBar.style.width = `${progress}%`;
                elements.currentTaskProgressText.textContent = `è¿›åº¦: ${progress}%`;
                elements.currentTaskTimeInfo.textContent = `${formatDuration(totalTime)} / ${formatDuration(state.currentTask.targetDuration)}`;
                
                // å½“è¿›åº¦è¶…è¿‡100%æ—¶æ”¹å˜é¢œè‰²
                if (progress >= 100) {
                    elements.currentTaskProgressBar.classList.remove('bg-primary');
                    elements.currentTaskProgressBar.classList.add('bg-accent');
                } else {
                    elements.currentTaskProgressBar.classList.remove('bg-accent');
                    elements.currentTaskProgressBar.classList.add('bg-primary');
                }
            }
            
            if (state.isRunning) {
                elements.timerStatus.textContent = 'æ­£åœ¨è®¡æ—¶';
                elements.timerStatus.className = 'inline-block px-3 py-1 bg-green-100 text-green-600 rounded-full text-sm';
                elements.startTimerBtn.classList.add('hidden');
                elements.pauseTimerBtn.classList.remove('hidden');
                elements.completeTaskBtn.classList.remove('hidden');
            } else {
                if (state.currentTask) {
                    elements.timerStatus.textContent = 'å·²æš‚åœ';
                    elements.timerStatus.className = 'inline-block px-3 py-1 bg-yellow-100 text-yellow-600 rounded-full text-sm';
                    elements.startTimerBtn.classList.remove('hidden');
                    elements.pauseTimerBtn.classList.add('hidden');
                    elements.completeTaskBtn.classList.remove('hidden');
                } else {
                    elements.timerStatus.textContent = 'å‡†å¤‡å°±ç»ª';
                    elements.timerStatus.className = 'inline-block px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm';
                    elements.startTimerBtn.classList.remove('hidden');
                    elements.pauseTimerBtn.classList.add('hidden');
                    elements.completeTaskBtn.classList.add('hidden');
                }
            }
        };
        
        const renderCurrentTask = () => {
            if (state.currentTask) {
                elements.currentTaskName.textContent = state.currentTask.name;
                elements.currentTaskDescription.textContent = state.currentTask.description || 'æ— æè¿°';
                
                // æ˜¾ç¤ºæˆ–éšè—è¿›åº¦æ¡
                if (state.currentTask.targetDuration > 0) {
                    elements.currentTaskProgressContainer.classList.remove('hidden');
                } else {
                    elements.currentTaskProgressContainer.classList.add('hidden');
                }
            } else {
                elements.currentTaskName.textContent = 'æœªé€‰æ‹©ä»»åŠ¡';
                elements.currentTaskDescription.textContent = 'è¯·ä»ä»»åŠ¡åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªä»»åŠ¡å¼€å§‹è®¡æ—¶';
                elements.currentTaskProgressContainer.classList.add('hidden');
            }
            
            renderTimer();
        };
        
        const renderTasks = () => {
            elements.taskList.innerHTML = '';
            
            if (state.tasks.length === 0) {
                elements.taskList.classList.add('hidden');
                elements.emptyTasks.classList.remove('hidden');
                return;
            }
            
            elements.taskList.classList.remove('hidden');
            elements.emptyTasks.classList.add('hidden');
            
            state.tasks.forEach(task => {
                const taskCard = document.createElement('div');
                taskCard.className = 'bg-white rounded-xl p-5 shadow-sm card-hover card';
                taskCard.dataset.taskId = task.id;
                
                // è®¡ç®—ä»»åŠ¡è¿›åº¦
                const progress = task.targetDuration > 0 ? calculateProgress(task.duration, task.targetDuration) : 0;
                const progressColor = progress >= 100 ? 'bg-accent' : 'bg-primary';
                
                // æ ¼å¼åŒ–ç›®æ ‡æ—¶é•¿æ˜¾ç¤º
                const targetDurationText = task.targetDuration > 0 ? formatDuration(task.targetDuration) : 'æœªè®¾ç½®';
                
                taskCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="w-full">
                            <h3 class="font-semibold text-lg">${task.name}</h3>
                            <p class="text-gray-500 text-sm mt-1">${task.description || 'æ— æè¿°'}</p>
                            
                            ${task.targetDuration > 0 ? `
                            <div class="mt-3">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="inline-flex items-center text-gray-500">
                                        <i class="fa fa-tasks mr-1"></i> å®Œæˆåº¦: ${progress}%
                                    </span>
                                    <span class="inline-flex items-center text-gray-500">
                                        <i class="fa fa-clock-o mr-1"></i> ç›®æ ‡: ${targetDurationText}
                                    </span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value ${progressColor}" style="width: ${progress}%"></div>
                                </div>
                            </div>
                            ` : ''}
                            
                            <div class="flex items-center mt-3 text-sm">
                                <span class="inline-flex items-center text-gray-500 mr-4">
                                    <i class="fa fa-clock-o mr-1"></i> å·²ç”¨æ—¶: ${formatDuration(task.duration)}
                                </span>
                                <span class="inline-flex items-center text-gray-500">
                                    <i class="fa fa-history mr-1"></i> æœ€åæ›´æ–°: ${task.lastUpdated || 'ä»æœª'}
                                </span>
                            </div>
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <button class="start-task-btn p-2 text-secondary hover:bg-secondary/10 rounded-full transition-colors" title="å¼€å§‹æ­¤ä»»åŠ¡">
                                <i class="fa fa-play"></i>
                            </button>
                            <button class="edit-task-btn p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors" title="ç¼–è¾‘ä»»åŠ¡">
                                <i class="fa fa-pencil"></i>
                            </button>
                            <button class="reset-task-btn p-2 text-accent hover:bg-accent/10 rounded-full transition-colors" title="é‡ç½®è¿›åº¦">
                                <i class="fa fa-refresh"></i>
                            </button>
                            <button class="delete-task-btn p-2 text-danger hover:bg-danger/10 rounded-full transition-colors" title="åˆ é™¤ä»»åŠ¡">
                                <i class="fa fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                elements.taskList.appendChild(taskCard);
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬
                taskCard.querySelector('.start-task-btn').addEventListener('click', () => {
                    selectTask(task.id);
                });
                
                taskCard.querySelector('.edit-task-btn').addEventListener('click', () => {
                    editTask(task.id);
                });
                
                taskCard.querySelector('.reset-task-btn').addEventListener('click', () => {
                    resetTaskProgress(task.id);
                });
                
                taskCard.querySelector('.delete-task-btn').addEventListener('click', () => {
                    deleteTask(task.id);
                });
            });
        };
        
        const renderHistory = () => {
            elements.historyList.innerHTML = '';
            
            if (state.history.length === 0) {
                elements.historyList.classList.add('hidden');
                elements.emptyHistory.classList.remove('hidden');
                return;
            }
            
            elements.historyList.classList.remove('hidden');
            elements.emptyHistory.classList.add('hidden');
            
            // æŒ‰æ—¶é—´å€’åºæ˜¾ç¤ºï¼ˆæœ€æ–°çš„åœ¨å‰é¢ï¼‰
            const sortedHistory = [...state.history].sort((a, b) => b.id - a.id);
            
            sortedHistory.forEach(record => {
                const row = document.createElement('tr');
                
                const statusClass = record.status === 'completed' 
                    ? 'bg-green-100 text-green-800' 
                    : 'bg-yellow-100 text-yellow-800';
                    
                const statusText = record.status === 'completed' ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ';
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${record.taskName}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-500">${formatDuration(record.duration)}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-500">${record.startTime}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">
                            ${statusText}
                        </span>
                    </td>
                `;
                
                elements.historyList.appendChild(row);
            });
        };
        
        // è®¡æ—¶å™¨æ§åˆ¶å‡½æ•°
        const startTimer = () => {
            if (state.isRunning || !state.currentTask) return;
            
            state.isRunning = true;
            state.timer = setInterval(() => {
                state.seconds++;
                renderTimer();
                
                // æ¯30ç§’è‡ªåŠ¨ä¿å­˜ä¸€æ¬¡
                if (state.seconds % 30 === 0) {
                    saveToLocalStorage();
                }
            }, 1000);
            
            renderTimer();
        };
        
        const pauseTimer = () => {
            if (!state.isRunning) return;
            
            clearInterval(state.timer);
            state.isRunning = false;
            renderTimer();
            
            // æš‚åœæ—¶ä¿å­˜æ•°æ®
            saveToLocalStorage();
        };
        
        const resetTimer = () => {
            if (!state.isRunning) return;
            
            clearInterval(state.timer);
            state.isRunning = false;
            state.seconds = 0;
            renderTimer();
            
            // é‡ç½®æ—¶ä¿å­˜æ•°æ®
            saveToLocalStorage();
        };
        
        const completeTask = () => {
            if (!state.currentTask) return;
            
            pauseTimer();
            
            // æ›´æ–°ä»»åŠ¡æ€»æ—¶é•¿
            const taskIndex = state.tasks.findIndex(t => t.id === state.currentTask.id);
            if (taskIndex !== -1) {
                state.tasks[taskIndex].duration += state.seconds;
                state.tasks[taskIndex].lastUpdated = getCurrentTimeString().split(' ')[0];
            }
            
            // æ·»åŠ åˆ°å†å²è®°å½•
            const startTime = getCurrentTimeString();
            
            state.history.push({
                id: Date.now(),
                taskId: state.currentTask.id,
                taskName: state.currentTask.name,
                duration: state.seconds,
                startTime: startTime,
                status: 'completed'
            });
            
            // é‡ç½®è®¡æ—¶å™¨
            state.currentTask = null;
            state.seconds = 0;
            
            // é‡æ–°æ¸²æŸ“
            renderCurrentTask();
            renderTimer();
            renderTasks();
            renderHistory();
            
            // å®Œæˆä»»åŠ¡åä¿å­˜æ•°æ®
            saveToLocalStorage();
            
            // æ˜¾ç¤ºå®Œæˆæç¤º
            alert('ä»»åŠ¡å·²å®Œæˆï¼');
        };
        
        // ä»»åŠ¡ç®¡ç†å‡½æ•°
        const selectTask = (taskId) => {
            // å¦‚æœæœ‰æ­£åœ¨è¿è¡Œçš„è®¡æ—¶å™¨ï¼Œå…ˆæš‚åœ
            if (state.isRunning) {
                pauseTimer();
            }
            
            // æŸ¥æ‰¾ä»»åŠ¡
            const task = state.tasks.find(t => t.id === taskId);
            if (task) {
                state.currentTask = task;
                state.seconds = 0;
                renderCurrentTask();
                
                // æ»šåŠ¨åˆ°è®¡æ—¶å™¨
                document.getElementById('timer').scrollIntoView({ behavior: 'smooth' });
            }
        };
        
        const addTask = () => {
            elements.modalTitle.textContent = 'æ·»åŠ æ–°ä»»åŠ¡';
            elements.taskId.value = '';
            elements.taskName.value = '';
            elements.taskDescription.value = '';
            elements.taskHours.value = '';
            elements.taskMinutes.value = '';
            elements.taskSeconds.value = '';
            
            openModal();
        };
        
        const editTask = (taskId) => {
            const task = state.tasks.find(t => t.id === taskId);
            if (task) {
                elements.modalTitle.textContent = 'ç¼–è¾‘ä»»åŠ¡';
                elements.taskId.value = task.id;
                elements.taskName.value = task.name;
                elements.taskDescription.value = task.description || '';
                
                // åˆ†è§£ç›®æ ‡æ—¶é•¿ä¸ºå°æ—¶ã€åˆ†é’Ÿã€ç§’
                if (task.targetDuration > 0) {
                    const hours = Math.floor(task.targetDuration / 3600);
                    const minutes = Math.floor((task.targetDuration % 3600) / 60);
                    const seconds = task.targetDuration % 60;
                    
                    elements.taskHours.value = hours;
                    elements.taskMinutes.value = minutes;
                    elements.taskSeconds.value = seconds;
                } else {
                    elements.taskHours.value = '';
                    elements.taskMinutes.value = '';
                    elements.taskSeconds.value = '';
                }
                
                openModal();
            }
        };
        
        // åˆ é™¤ä»»åŠ¡åŠŸèƒ½
        const deleteTask = (taskId) => {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚')) {
                // å¦‚æœåˆ é™¤çš„æ˜¯å½“å‰æ­£åœ¨è®¡æ—¶çš„ä»»åŠ¡ï¼Œå…ˆé‡ç½®è®¡æ—¶å™¨
                if (state.currentTask && state.currentTask.id === taskId) {
                    resetTimer();
                    state.currentTask = null;
                    renderCurrentTask();
                }
                
                // ä»ä»»åŠ¡åˆ—è¡¨ä¸­åˆ é™¤ä»»åŠ¡
                state.tasks = state.tasks.filter(task => task.id !== taskId);
                
                // ä»å†å²è®°å½•ä¸­åˆ é™¤ä¸è¯¥ä»»åŠ¡ç›¸å…³çš„è®°å½•
                state.history = state.history.filter(record => record.taskId !== taskId);
                
                // é‡æ–°æ¸²æŸ“ç•Œé¢
                renderTasks();
                renderHistory();
                
                // ä¿å­˜æ•°æ®
                saveToLocalStorage();
            }
        };
        
        // é‡ç½®ä»»åŠ¡è¿›åº¦åŠŸèƒ½
        const resetTaskProgress = (taskId) => {
            if (confirm('ç¡®å®šè¦é‡ç½®è¿™ä¸ªä»»åŠ¡çš„è¿›åº¦å—ï¼Ÿè¿™å°†æ¸…é™¤è¯¥ä»»åŠ¡çš„æ‰€æœ‰ç´¯è®¡æ—¶é—´ã€‚')) {
                const taskIndex = state.tasks.findIndex(t => t.id === taskId);
                
                if (taskIndex !== -1) {
                    // é‡ç½®ä»»åŠ¡è¿›åº¦
                    state.tasks[taskIndex].duration = 0;
                    state.tasks[taskIndex].lastUpdated = getCurrentTimeString().split(' ')[0];
                    
                    // å¦‚æœæ˜¯å½“å‰ä»»åŠ¡ï¼Œä¹Ÿé‡ç½®è®¡æ—¶å™¨
                    if (state.currentTask && state.currentTask.id === taskId) {
                        resetTimer();
                        renderTimer();
                    }
                    
                    // é‡æ–°æ¸²æŸ“ç•Œé¢
                    renderTasks();
                    
                    // ä¿å­˜æ•°æ®
                    saveToLocalStorage();
                }
            }
        };
        
        const saveTask = (e) => {
            e.preventDefault();
            
            const id = elements.taskId.value ? parseInt(elements.taskId.value) : Date.now();
            const name = elements.taskName.value.trim();
            const description = elements.taskDescription.value.trim();
            
            // è®¡ç®—ç›®æ ‡æ—¶é•¿ï¼ˆç§’ï¼‰
            const hours = parseInt(elements.taskHours.value) || 0;
            const minutes = parseInt(elements.taskMinutes.value) || 0;
            const seconds = parseInt(elements.taskSeconds.value) || 0;
            const targetDuration = hours * 3600 + minutes * 60 + seconds;
            
            if (!name) return;
            
            const taskIndex = state.tasks.findIndex(t => t.id === id);
            
            if (taskIndex !== -1) {
                // æ›´æ–°ç°æœ‰ä»»åŠ¡
                state.tasks[taskIndex].name = name;
                state.tasks[taskIndex].description = description;
                state.tasks[taskIndex].targetDuration = targetDuration;
                state.tasks[taskIndex].lastUpdated = getCurrentTimeString().split(' ')[0];
                
                // å¦‚æœæ˜¯å½“å‰ä»»åŠ¡ï¼Œæ›´æ–°å½“å‰ä»»åŠ¡ä¿¡æ¯
                if (state.currentTask && state.currentTask.id === id) {
                    state.currentTask.name = name;
                    state.currentTask.description = description;
                    state.currentTask.targetDuration = targetDuration;
                    renderCurrentTask();
                }
            } else {
                // æ·»åŠ æ–°ä»»åŠ¡
                state.tasks.push({
                    id: id,
                    name: name,
                    description: description,
                    duration: 0,
                    targetDuration: targetDuration,
                    lastUpdated: getCurrentTimeString().split(' ')[0]
                });
            }
            
            closeModal();
            renderTasks();
            
            // ä¿å­˜ä»»åŠ¡åä¿å­˜æ•°æ®
            saveToLocalStorage();
        };
        
        // æ¨¡æ€æ¡†æ§åˆ¶å‡½æ•°
        const openModal = () => {
            elements.taskModal.classList.remove('hidden');
            // è§¦å‘åŠ¨ç”»
            setTimeout(() => {
                elements.modalContent.classList.remove('scale-95', 'opacity-0');
                elements.modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
            
            // èšç„¦åˆ°ä»»åŠ¡åç§°è¾“å…¥æ¡†
            elements.taskName.focus();
        };
        
        const closeModal = () => {
            elements.modalContent.classList.remove('scale-100', 'opacity-100');
            elements.modalContent.classList.add('scale-95', 'opacity-0');
            
            // å®Œå…¨éšè—æ¨¡æ€æ¡†
            setTimeout(() => {
                elements.taskModal.classList.add('hidden');
            }, 300);
        };
        
        // ç§»åŠ¨ç«¯èœå•æ§åˆ¶
        const toggleMobileMenu = () => {
            elements.mobileMenu.classList.toggle('hidden');
        };
        
        // äº‹ä»¶ç›‘å¬
        elements.startTimerBtn.addEventListener('click', startTimer);
        elements.pauseTimerBtn.addEventListener('click', pauseTimer);
        elements.resetTimerBtn.addEventListener('click', resetTimer);
        elements.completeTaskBtn.addEventListener('click', completeTask);
        elements.addTaskButton.addEventListener('click', addTask);
        elements.closeModal.addEventListener('click', closeModal);
        elements.cancelTask.addEventListener('click', closeModal);
        elements.taskForm.addEventListener('submit', saveTask);
        elements.mobileMenuButton.addEventListener('click', toggleMobileMenu);
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        elements.taskModal.addEventListener('click', (e) => {
            if (e.target === elements.taskModal) {
                closeModal();
            }
        });
        
        // é¡µé¢å…³é—­å‰ä¿å­˜æ•°æ®
        window.addEventListener('beforeunload', () => {
            if (state.isRunning) {
                pauseTimer();
                
                // å¦‚æœæœ‰å…³è”ä»»åŠ¡ï¼Œä¿å­˜å½“å‰è®¡æ—¶
                if (state.currentTask) {
                    const taskIndex = state.tasks.findIndex(t => t.id === state.currentTask.id);
                    if (taskIndex !== -1) {
                        state.tasks[taskIndex].duration += state.seconds;
                        state.tasks[taskIndex].lastUpdated = getCurrentTimeString().split(' ')[0];
                        
                        // æ·»åŠ æœªå®Œæˆè®°å½•
                        const startTime = getCurrentTimeString();
                        state.history.push({
                            id: Date.now(),
                            taskId: state.currentTask.id,
                            taskName: state.currentTask.name,
                            duration: state.seconds,
                            startTime: startTime,
                            status: 'incomplete'
                        });
                    }
                }
            }
            
            saveToLocalStorage();
        });
        
        // åˆå§‹åŒ–
        const init = () => {
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
            const loaded = loadFromLocalStorage();
            
            // // å¦‚æœæ²¡æœ‰åŠ è½½åˆ°æ•°æ®ï¼Œæ·»åŠ ä¸€äº›ç¤ºä¾‹ä»»åŠ¡
            // if (!loaded || state.tasks.length === 0) {
            //     state.tasks = [
            //         { 
            //             id: 1, 
            //             name: 'å®Œæˆé¡¹ç›®æŠ¥å‘Š', 
            //             description: 'æ’°å†™å¹¶æäº¤å­£åº¦é¡¹ç›®è¿›å±•æŠ¥å‘Š', 
            //             duration: 5025, 
            //             targetDuration: 10800, // 3å°æ—¶
            //             lastUpdated: 'ä»Šå¤©' 
            //         },
            //         { 
            //             id: 2, 
            //             name: 'å­¦ä¹ JavaScript', 
            //             description: 'å­¦ä¹ å¼‚æ­¥ç¼–ç¨‹å’ŒPromiseç›¸å…³çŸ¥è¯†', 
            //             duration: 11722, 
            //             targetDuration: 14400, // 4å°æ—¶
            //             lastUpdated: 'æ˜¨å¤©' 
            //         }
            //     ];
                
            //     state.history = [
            //         { id: 1, taskId: 1, taskName: 'å®Œæˆé¡¹ç›®æŠ¥å‘Š', duration: 6330, startTime: 'ä»Šå¤© 09:30', status: 'completed' },
            //         { id: 2, taskId: 2, taskName: 'å­¦ä¹ JavaScript', duration: 7510, startTime: 'æ˜¨å¤© 14:20', status: 'completed' },
            //         { id: 3, taskId: 3, taskName: 'å‡†å¤‡ä¼šè®®ææ–™', duration: 3322, startTime: 'æ˜¨å¤© 10:15', status: 'incomplete' }
            //     ];
                
            //     // ä¿å­˜ç¤ºä¾‹æ•°æ®
            //     saveToLocalStorage();
            // }
            
            renderTimer();
            renderCurrentTask();
            renderTasks();
            renderHistory();
        };
        
        // å¯åŠ¨åº”ç”¨
        init();
    </script>
</body>
</html>
        </section>
    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© è€æ±Ÿæ¹– | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>
<script src="/js/code-copy.js"></script>


    </div>
</body>
<!-- umami -->
<script defer src="https://cloud.umami.is/script.js" data-website-id="91b923f2-ff2d-43d0-ba5f-bc348d82426a"></script>
</html>